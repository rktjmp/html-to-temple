import{t as e}from"./vendor.780cc7e6.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(n){const o=new URL(e,location),r=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((n,a)=>{const l=new URL(e,o);if(self[t].moduleMap[l])return n(self[t].moduleMap[l]);const s=new Blob([`import * as m from '${l}';`,`${t}.moduleMap['${l}']=m;`],{type:"text/javascript"}),u=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(s),onerror(){a(new Error(`Failed to import: ${e}`)),r(u)},onload(){n(self[t].moduleMap[l]),r(u)}});document.head.appendChild(u)})),self[t].moduleMap={}}}("/html-to-temple/assets/");const t=(n={__unknown:e=>({type:e.type,value:e.text})},e=>n[e]?n[e]:n.__unknown);var n;const o=(e,n)=>{const r=t(e.type)(e);switch(r.type){case"element":const t={type:"tag",name:"",attributes:[],children:[]};return e.children.map((e=>o(e,t))),n.children.push(t);case"end_tag":return;case"tag_name":return void(n.name=r.value);case"text":return void n.children.push({type:"text",attributes:[],children:[],value:r.value});case"attribute":const a={name:"",value:""};return e.children.map((e=>o(e,a))),n.attributes.push(a),n;case"attribute_name":return void(n.name=r.value);case"attribute_value":return void(n.value=r.value);default:return e.children.map((e=>o(e,n))),n}},r=e=>{if("text"==e.type)return e.value.match(/^\s*$/)?null:['"'+e.value+'"',"",[]];const t=(e=>e.map((e=>[e.name.replaceAll("-","_"),": ",'"',e.value,'"'].join(""))))(e.attributes);e.name;let n=()=>"unset";return n=0==e.children.length?()=>[]:()=>["do",e.children.map(r),"end"],[e.name,t.join(", "),n()]},a=(e,t="",n=[])=>{if(null==e)return n;const o=[e[0],e[1]];return""!=t&&(o.reverse().push(t),o.reverse()),e[2].length>0?(o.push([t,e[2][0]].join("")),n.push(o.join(" ")),e[2][1].map((e=>{a(e,t+"  ").map((e=>n.push(e)))})),n.push([t,e[2][2]].join(""))):n.push(o.join(" ")),n};window.translate=function(t,n){e.init().then((async()=>{const l=t.value;console.log("input: ",l);const s=new e,u=await e.Language.load("tree-sitter-html.wasm");s.setLanguage(u);const c=l,i=s.parse(c);console.log("tr-parse: ",i.rootNode.toString());const p=o(i.rootNode,{name:"__root__",children:[]});console.log("reduce: ",p.children);const m=p.children.map(r);console.log("toTemple: ",m);const d=m.flatMap((e=>a(e,"")));console.log("lines: ",d),console.log(d.join("\n")),n.value=d.join("\n")}))};
